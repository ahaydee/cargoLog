<h2>Empresas</h2>
<hr />
<div class="row">
	<div class="col-lg-12">
		<div class="table-responsive">
			<table class="table table-striped table-bordered ">
				<thead class="thead-dark" style="width: 100%">
					<tr>
						<th>CNPJ</th>
						<th>Nome</th>
						<th>Razão Social</th>
						<th>Telefone</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let empresa of this.empresas">
						<td>{{empresa.CNPJ}}</td>
						<td>{{empresa.Nome}}</td>
						<td>{{empresa.RazaoSocial}}</td>
						<td>{{empresa.Telefone}}</td>
						<td style="text-align: left">
							<button class="btn btn-link" title="Editar" (click)="this.edit(template, empresa.CNPJ);"><i class="fa fa-edit"></i></button>
						</td>
					</tr>
					<tr *ngIf="!this.empresas || (this.empresas && this.empresas.length == 0)">
						<td colspan="5">Nenhum dado foi encontrado</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
<hr />
<div class="row">
	<div class="col-lg-2">
		<button class="btn btn-info" style="width: 100%" (click)="this.add(content)">Adicionar</button>
	</div>
</div>


<ng-template #content let-modal>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Adicionar Empresa</h4>
	</div>
	<div class="modal-body">
		<div class="row">
			<div class="col-lg-11">
				<div class="errors">
					<p id='cnpjError' style="display: none;">O <strong>CNPJ</strong> é obrigatório</p>
					<p id='razaoError' style="display: none;">A <strong>Razão Social</strong> é obrigatória</p>
					<p id='nomeError' style="display: none;">O <strong>Nome</strong> é obrigatório</p>
					<p id='telError' style="display: none;">O <strong>Telefone</strong> é obrigatório</p>
					<p id='endError' style="display: none;">O <strong>Endereço</strong> é obrigatório</p>
					<p id='cepError' style="display: none;">O <strong>CEP</strong> é obrigatório</p>
					<p id='bairroError' style="display: none;">O <strong>Bairro</strong> é obrigatório</p>
					<p id='municipioError' style="display: none;">O <strong>Município</strong> é obrigatório</p>
					<p id='ufError' style="display: none;">A <strong>UF</strong> é obrigatória</p>
					<p id='paisError' style="display: none;">O <strong>País</strong> é obrigatório</p>
					<p id='ieError' style="display: none;">A <strong>IE</strong> é obrigatória</p>
				</div>
			</div>
		</div>
		<div class="row" style="padding: 10px">
			<div class="col-lg-3" style="padding-bottom: 15px">
				<label for="cnpj"><strong>CNPJ<span class="required">*</span></strong></label>
				<input #cnpj id="cnpj" type="text" class="form-control" (change)="this.onChange('cnpj', cnpj.value)">
			</div>
			<div class="col-lg-9" style="padding-bottom: 15px">
				<label for="razao" title="Nome da Empresa atrelado ao CNPJ"><strong>Razão Social<span class="required">*</span></strong></label>
				<input #razao id="razao" type="text" class="form-control" (change)="this.onChange('razao', razao.value)">
			</div>
			<div class="col-lg-4" style="padding-bottom: 15px">
				<label for="nome"><strong>Nome<span class="required">*</span></strong></label>
				<input #nome id="nome" type="text" class="form-control" (change)="this.onChange('nome', nome.value)">
			</div>
			<div class="col-lg-3" style="padding-bottom: 15px">
				<label for="tel"><strong>Telefone<span class="required">*</span></strong></label>
				<input #tel id="tel" type="text" class="form-control" (change)="this.onChange('tel', tel.value)">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="email">Email</label>
				<input #email id="email" type="text" class="form-control">
			</div>
			<div class="col-lg-12" style="padding-bottom: 15px">
				<label for="desc" title="Informação adicional do CNPJ">Descrição CNPJ</label>
				<textarea #desc id="desc" class="form-control"></textarea>
			</div>
			<div class="col-lg-12" style="padding-bottom: 15px">
				<label for="end"><strong>Endereço<span class="required">*</span></strong></label>
				<textarea #end id="end" class="form-control" (change)="this.onChange('end', end.value)"></textarea>
			</div>
			<div class="col-lg-2" style="padding-bottom: 15px">
				<label for="cep"><strong>CEP<span class="required">*</span></strong></label>
				<input #cep id="cep" type="text" class="form-control" (change)="this.onChange('cep', cep.value)">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="bairro"><strong>Bairro<span class="required">*</span></strong></label>
				<input #bairro id="bairro" type="text" class="form-control" (change)="this.onChange('bairro', bairro.value)">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="municipio"><strong>Município<span class="required">*</span></strong></label>
				<input #municipio id="municipio" type="text" class="form-control" (change)="this.onChange('municipio', municipio.value)">
			</div>
			<div class="col-lg-2" style="padding-bottom: 15px">
				<label for="uf"><strong>UF<span class="required">*</span></strong></label>
				<input #uf id="uf" type="text" class="form-control" (change)="this.onChange('uf', uf.value)">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="pais"><strong>País<span class="required">*</span></strong></label>
				<input #pais id="pais" type="text" class="form-control" (change)="this.onChange('pais', pais.value)">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="ie" title="Inscrição Estadual"><strong>IE<span class="required">*</span></strong></label>
				<input #ie id="ie" type="text" class="form-control" (change)="this.onChange('ie', ie.value)">
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-success" (click)="this.saveAdd(cnpj.value, nome.value, tel.value, email.value, razao.value, desc.value, end.value, cep.value, uf.value, municipio.value, bairro.value, pais.value, ie.value)">Salvar</button>
		<button type="button" class="btn btn-secondary" (click)="this.close()" >Cancelar</button>
	</div>
</ng-template>


<ng-template #template let-modal>

	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Editar Empresa</h4>
	</div>
	<div class="modal-body">
		<div class="row">
			<div class="col-lg-11">
				<div class="errors">
					<p id='cnpj2Error' style="display: none;">O <strong>CNPJ</strong> é obrigatório</p>
					<p id='razao2Error' style="display: none;">A <strong>Razão Social</strong> é obrigatório</p>
					<p id='nome2Error' style="display: none;">O <strong>Nome</strong> é obrigatório</p>
					<p id='tel2Error' style="display: none;">O <strong>Telefone</strong> é obrigatório</p>
					<p id='end2Error' style="display: none;">O <strong>Endereço</strong> é obrigatório</p>
					<p id='cep2Error' style="display: none;">O <strong>CEP</strong> é obrigatório</p>
					<p id='bairro2Error' style="display: none;">O <strong>Bairro</strong> é obrigatório</p>
					<p id='municipio2Error' style="display: none;">O <strong>Município</strong> é obrigatório</p>
					<p id='uf2Error' style="display: none;">A <strong>UF</strong> é obrigatório</p>
					<p id='pais2Error' style="display: none;">O <strong>País</strong> é obrigatório</p>
					<p id='ie2Error' style="display: none;">A <strong>IE</strong> é obrigatório</p>
				</div>
			</div>
		</div>
		<div class="row" style="padding: 10px">
			<div class="col-lg-3" style="padding-bottom: 15px">
				<label for="cnpj2"><strong>CNPJ<span class="required">*</span></strong></label>
				<input #cnpj id="cnpj2" type="text" class="form-control" disabled [(ngModel)]="current.CNPJ">
			</div>
			<div class="col-lg-9" style="padding-bottom: 15px">
				<label for="razao2" title="Nome da Empresa atrelado ao CNPJ"><strong>Razão Social<span class="required">*</span></strong></label>
				<input #razao id="razao2" type="text" class="form-control" (change)="this.onChange('razao2', razao.value)" [(ngModel)]="current.RazaoSocial">
			</div>
			<div class="col-lg-4" style="padding-bottom: 15px">
				<label for="nome2"><strong>Nome<span class="required">*</span></strong></label>
				<input #nome id="nome2" type="text" class="form-control" (change)="this.onChange('nome2', nome.value)" [(ngModel)]="current.Nome">
			</div>
			<div class="col-lg-3" style="padding-bottom: 15px">
				<label for="tel2"><strong>Telefone<span class="required">*</span></strong></label>
				<input #tel id="tel2" type="text" class="form-control" (change)="this.onChange('tel', tel2.value)" [(ngModel)]="current.Telefone">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="email2">Email</label>
				<input #email id="email2" type="text" class="form-control" [(ngModel)]="current.Email">
			</div>
			<div class="col-lg-12" style="padding-bottom: 15px">
				<label for="desc2" title="Informação adicional do CNPJ">Descrição CNPJ</label>
				<textarea #desc id="desc2" class="form-control" [(ngModel)]="current.DsCNPJ"></textarea>
			</div>
			<div class="col-lg-12" style="padding-bottom: 15px">
				<label for="end2"><strong>Endereço<span class="required">*</span></strong></label>
				<textarea #end id="end2" class="form-control" (change)="this.onChange('end2', end.value)" [(ngModel)]="current.Endereco"></textarea>
			</div>
			<div class="col-lg-2" style="padding-bottom: 15px">
				<label for="cep2"><strong>CEP<span class="required">*</span></strong></label>
				<input #cep id="cep2" type="text" class="form-control" (change)="this.onChange('cep2', cep.value)" [(ngModel)]="current.CEP">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="bairro2"><strong>Bairro<span class="required">*</span></strong></label>
				<input #bairro id="bairro2" type="text" class="form-control" (change)="this.onChange('bairro2', bairro.value)" [(ngModel)]="current.Bairro">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="municipio2"><strong>Município<span class="required">*</span></strong></label>
				<input #municipio id="municipio2" type="text" class="form-control" (change)="this.onChange('municipio2', municipio.value)" [(ngModel)]="current.Municipio">
			</div>
			<div class="col-lg-2" style="padding-bottom: 15px">
				<label for="uf2"><strong>UF<span class="required">*</span></strong></label>
				<input #uf id="uf2" type="text" class="form-control" (change)="this.onChange('uf2', uf.value)" [(ngModel)]="current.UF">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="pais2"><strong>País<span class="required">*</span></strong></label>
				<input #pais id="pais2" type="text" class="form-control" (change)="this.onChange('pais2', pais.value)" [(ngModel)]="current.Pais">
			</div>
			<div class="col-lg-5" style="padding-bottom: 15px">
				<label for="ie2" title="Inscrição Estadual"><strong>IE<span class="required">*</span></strong></label>
				<input #ie id="ie2" type="text" class="form-control" (change)="this.onChange('ie2', ie.value)" [(ngModel)]="current.IE">
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-success" (click)="this.save(cnpj.value, nome.value, tel.value, email.value, razao.value, desc.value, end.value, cep.value, uf.value, municipio.value, bairro.value, pais.value, ie.value)">Salvar</button>
		<button type="button" class="btn btn-secondary" (click)="this.close()" >Cancelar</button>
	</div>
</ng-template>